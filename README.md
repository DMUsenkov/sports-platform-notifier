# Telegram-бот для уведомлений о спортивных соревнованиях

## Описание

Данный проект представляет собой Telegram-бота для отправки уведомлений пользователям онлайн-платформы для поиска и управления любительскими спортивными соревнованиями. Бот отправляет уведомления о важных событиях, связанных с чемпионатами, матчами и командами пользователя.

## Типы уведомлений

Бот отправляет следующие типы уведомлений:

- Отправка заявки командой на чемпионат
- Отмена или отклонение заявки на чемпионат
- Отмена или завершение чемпионата
- Назначение нового матча
- Перенос матча
- Проход или непроход команды в плей-офф
- Напоминание о матче за 24 часа
- Новые интересные чемпионаты
- Сообщения от оргкомитета
- Приглашение в команду
- Приглашение в оргкомитет

## Технический стек

- Python 3.11
- Aiogram 2.25.1 - фреймворк для создания Telegram-ботов
- SQLAlchemy 2.0.27 - ORM для работы с базой данных
- PostgreSQL - СУБД для хранения данных
- Docker и Docker Compose - для контейнеризации и оркестрации

## Подготовка к запуску

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/yourusername/sports-platform-notifier.git
   cd sports-platform-notifier
   ```

2. Создайте файл `.env` на основе `.env.example` и заполните его необходимыми переменными окружения:
   ```
   cp .env.example .env
   ```

3. Получите токен для бота у @BotFather в Telegram и добавьте его в файл `.env`.

## Запуск с помощью Docker Compose

1. Убедитесь, что у вас установлены Docker и Docker Compose.

2. Запустите бота с помощью Docker Compose:
   ```
   docker-compose up -d
   ```

3. Проверьте логи бота:
   ```
   docker-compose logs -f bot
   ```

## Запуск без Docker

1. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Запустите бота:
   ```
   python -m bot.main
   ```

## Структура проекта

```
sports_platform_notifier/
├── bot/
│   ├── __init__.py
│   ├── main.py              # Основной файл бота
│   ├── handlers/            # Обработчики сообщений
│   │   ├── __init__.py
│   │   ├── user.py          # Обработчики для обычных пользователей
│   │   └── notification.py  # Обработчики для уведомлений
│   ├── keyboards/           # Клавиатуры
│   │   ├── __init__.py
│   │   └── keyboards.py
│   └── messages/            # Шаблоны сообщений
│       ├── __init__.py
│       └── templates.py
├── database/
│   ├── __init__.py
│   ├── connection.py        # Подключение к базе данных
│   ├── models.py            # Модели данных
│   └── repositories/        # Репозитории для работы с данными
│       ├── __init__.py  
│       ├── user_repository.py
│       └── notification_repository.py
├── config/
│   ├── __init__.py
│   └── config.py            # Конфигурация приложения
├── api/
│   ├── __init__.py
│   └── client.py            # Клиент для взаимодействия с основным приложением
├── utils/
│   ├── __init__.py
│   └── logger.py            # Логирование
├── requirements.txt         # Зависимости проекта
├── Dockerfile               # Конфигурация Docker
└── docker-compose.yml       # Конфигурация Docker Compose
```

## Команды бота

- `/start` - Начать работу с ботом и привязать аккаунт по номеру телефона
- `/help` - Получить помощь по работе с ботом
- `/changephone` - Изменить привязанный номер телефона

## Автоматические задачи

Бот выполняет следующие автоматические задачи:

- Каждые 10 секунд проверяет наличие новых уведомлений для отправки
- Ежедневно в 12:00 создает напоминания о матчах, которые будут через 24 часа
- Ежедневно в 03:00 удаляет старые отправленные уведомления (старше 30 дней)